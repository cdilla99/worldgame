<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Geo Game Table</title>
  <script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <div id="landing-page">
      <header class="hero">
      <div class="hero-icon" aria-hidden="true">
        <svg viewBox="0 0 120 120" role="presentation">
          <defs>
            <linearGradient id="sky" x1="0%" x2="100%" y1="0%" y2="100%">
              <stop offset="0%" stop-color="#6fd3ff" />
              <stop offset="100%" stop-color="#4c8bff" />
            </linearGradient>
          </defs>
          <circle cx="60" cy="60" r="50" fill="url(#sky)" />
          <path d="M22 52c10-9 20-12 30-9 18 5 16 25 33 30 9 3 15 0 19-5-3 19-23 31-43 31-23 0-41-17-41-36 0-4 1-8 2-11z" fill="#7cdba8" />
          <path d="M78 32c6 1 12 4 15 9-8-2-15 1-22-1-8-2-15-10-24-10 8-5 20-7 31-4z" fill="#7cdba8" />
        </svg>
      </div>
      <div class="hero-copy">
        <p class="eyebrow">Globe Dash</p>
        <h1>Geo Game Table</h1>
        <div class="rules-top">
          <h3>Quick Rules</h3>
          <ul>
            <li>Pick a card holder, keep the flag hidden, and let teammates ask up to 10 questions.</li>
            <li>Each turn: ask <strong>one</strong> question or make <strong>one</strong> guess toward the country.</li>
            <li>Built-in clue and nearby country hint are each usable once per card.</li>
            <li>Scoring: Easy 1‚òÖ = 1 pt, Medium 2‚òÖ = 2 pts, Hard 3‚òÖ = 3 pts. No giveaway answers.</li>
          </ul>
        </div>
        <div class="subtitle">Choose how you want to play, then reveal the flag when everyone is ready to guess.</div>
        <div class="hero-highlights" role="group" aria-label="Choose play style">
          <button class="pill menu-trigger mode-btn active" id="hero-timer-trigger" data-mode="timer">‚è±Ô∏è Timed challenge ¬∑ <span id="hero-timer-value">15 min</span></button>
          <button class="pill mode-btn" id="hero-points-trigger" data-mode="points">ü§ù Team turns</button>
          <button class="pill muted pill-static" type="button" aria-label="Best with two to six players">Best with 2‚Äì6 players</button>
          <div class="menu hidden" id="hero-timer-menu" role="listbox" aria-label="Select timer length">
            <button type="button" data-minutes="5">5 minutes</button>
            <button type="button" data-minutes="10">10 minutes</button>
            <button type="button" data-minutes="15" class="active">15 minutes</button>
            <button type="button" data-minutes="20">20 minutes</button>
            <button type="button" data-minutes="30">30 minutes</button>
          </div>
          <div class="vibe-row" aria-label="Game ambience">
            <button id="music-toggle" type="button" class="pill ghost music-toggle">üéµ Play chill loop</button>
            <span class="micro-hint">Soft loop you can toggle anytime.</span>
          </div>
        </div>
      </div>
      </header>

      <section id="setup" class="panel">
      <h2>Start a Game</h2>
      <form id="setup-form">
        <div class="grid">
          <label>Number of Players (2‚Äì8)
            <input type="number" id="player-count" min="2" max="8" value="2" />
          </label>
          <label>Mode
            <select id="mode">
              <option value="timer">Timed challenge (countdown)</option>
              <option value="points">Turn-based team play (points)</option>
            </select>
          </label>
          <label id="timer-wrapper">Timer length (minutes)
            <input type="number" id="timer-length" min="5" max="45" value="15" />
          </label>
          <label id="points-wrapper" class="hidden">Target points
            <input type="number" id="target-points" min="5" max="50" value="15" />
          </label>
          <label>Difficulty pool
            <select id="difficulty-pool">
              <option value="all">All</option>
              <option value="easy-medium">Easy + Medium</option>
              <option value="medium-hard">Medium + Hard</option>
              <option value="easy">Easy only</option>
              <option value="medium">Medium only</option>
              <option value="hard">Hard only</option>
            </select>
          </label>
        </div>
        <div class="muted helper-label">After picking the mode and player count, tap an avatar. Typing stays optional.</div>
        <div id="player-names" class="names"></div>
        <button type="submit" class="cta">Start Game</button>
      </form>
      </section>

      <section id="export" class="panel">
        <h2>Export Data</h2>
        <p>Copy JSON or download CSV for printing cards or using in your own tools.</p>
        <textarea id="export-json" readonly></textarea>
        <button id="download-csv" class="ghost">Download CSV</button>
      </section>
    </div>

    <div id="game-page" class="hidden">
      <section class="game-banner">
        <div>
          <p class="eyebrow">Game in play</p>
          <h2>Round tracker</h2>
          <p class="muted">Flag stays hidden until you tap reveal. Tap a player chip to log questions or guesses.</p>
        </div>
        <div class="banner-actions">
          <button type="button" id="restart-setup" class="ghost">Back to setup</button>
          <button type="button" id="next-round" class="cta mini">Next card</button>
        </div>
      </section>

      <section id="game" class="panel">
      <div class="top-row">
        <div>
          <h2>Current Card</h2>
          <p id="current-turn" class="pill muted"></p>
        </div>
        <div class="stats-row sticky-timer">
          <div class="timer-badge" id="timer-display" role="status">‚è±Ô∏è Timer: 15:00</div>
          <div class="pill strong" id="mode-display">Mode: Timed challenge</div>
          <div class="pill" id="score-display">Scoreboard ready</div>
          <button id="music-toggle-game" type="button" class="pill ghost compact music-toggle">üéµ Music off</button>
        </div>
      </div>
      <div class="card-layout">
        <div class="card-detail">
            <div class="outline-block">
              <div class="outline-copy">
                <p class="helper-label">Start with the outline</p>
                <p class="muted">Study the shape first. Peek the blurred flag if you must (costs a point) and keep the name hidden until ready.</p>
              </div>
            <figure class="map-figure spotlight">
              <img id="map-outline" alt="Country outline" />
              <figcaption class="muted">Country outline</figcaption>
            </figure>
            <div class="region-hint masked-soft" id="region-hint">
              <div class="region-label">Region hint</div>
              <div class="region-values"><span id="card-hemi"></span> ‚Ä¢ <span id="card-meta-top"></span></div>
              <button type="button" class="ghost mini" id="region-reveal">Reveal region hint</button>
            </div>
            <div class="flag-peek">
              <div class="flag-veil masked" id="flag-veil">
                <figure class="flag-figure">
                  <img id="card-flag-img" alt="Country flag" />
                  <div id="card-flag-fallback" class="flag">üè≥Ô∏è</div>
                  <figcaption class="muted">Flag (tap to peek)</figcaption>
                </figure>
              </div>
              <div class="flag-peek-actions">
                <button id="flag-peek-btn" class="ghost mini" type="button">Peek at flag (-1 point)</button>
                <p id="flag-peek-note" class="micro-hint">Flag stays blurred until you tap peek. Penalty only applies if the next guess is correct.</p>
              </div>
            </div>
          </div>

          <div class="info-grid">
            <div class="capital-hint masked-soft" id="capital-row"><strong>Capital:</strong> <span id="card-capital"></span> <button type="button" class="ghost mini" id="capital-reveal">Reveal capital hint</button></div>
            <div><strong>Population:</strong> <span id="card-pop"></span></div>
            <div><strong>Area:</strong> <span id="card-area"></span></div>
            <div><strong>Size:</strong> <span id="card-size"></span></div>
            <div><strong>Coast:</strong> <span id="card-coast"></span></div>
            <div><strong>Languages:</strong> <span id="card-lang"></span></div>
            <div><strong>Currency:</strong> <span id="card-currency"></span></div>
            <div><strong>Neighbors:</strong> <span id="card-neighbors"></span></div>
          </div>
          <div class="pill inline" id="difficulty-label"></div>
          <div class="tags" id="card-tags"></div>
          <div>
            <h4>Landmarks</h4>
            <ul id="card-landmarks"></ul>
          </div>
          <div>
            <h4>Fun Facts</h4>
            <ul id="card-facts"></ul>
          </div>
          <div class="clue-row">
            <button id="reveal-clue" class="ghost">Reveal Special Clue</button>
            <span id="built-in-clue" class="pill hidden"></span>
          </div>
          <div class="clue-row">
            <button id="reveal-nearby" class="ghost">Nearby Country Hint</button>
            <span id="nearby-clue" class="pill hidden"></span>
          </div>

          <div class="identity-block" id="identity-block">
            <div class="identity-inner">
              <div class="card-title">
                <h3 id="card-name">Country</h3>
                <p id="card-stars" class="stars">‚òÖ</p>
                <p id="card-meta" class="muted">Continent ‚Ä¢ Subregion</p>
              </div>
              <div class="helper muted">Keep the name hidden until everyone has guessed from the outline and (optional) flag peek.</div>
            </div>
            <div class="reveal-row">
              <div class="helper-label">Tap to reveal the country name.</div>
              <button id="reveal-flag" class="cta mini" type="button">Reveal country</button>
            </div>
          </div>
        </div>

        <div class="card-shared">
          <div class="role-board">
            <div>
              <p class="helper-label">Card holder</p>
              <div id="holder-chips" class="chip-row compact"></div>
            </div>
            <div>
              <p class="helper-label">Active guesser</p>
              <div id="qa-player-chips" class="chip-row"></div>
              <p class="micro-hint">Tap a player before logging questions or guesses.</p>
            </div>
          </div>
          <div class="question-head">
            <div class="pill">Questions used: <span id="question-count">0</span>/10</div>
            <div class="pill">Difficulty: <span id="shared-stars">‚òÖ</span></div>
          </div>
          <div class="question-log" id="qa-log"></div>
          <div class="qa-lite">
            <div class="actions">
              <button id="log-question" class="ghost">Log Question</button>
              <button id="log-guess" class="ghost">Log Guess</button>
              <button id="mark-correct" class="cta mini">Mark Correct Guess</button>
            </div>
          </div>
          <div class="helper">
            <p><strong>Flow:</strong> Pick the card holder, hit "Reveal flag" when everyone is ready, tap a player, then log a question or guess. When someone nails it, hit "Mark Correct Guess".</p>
            <p><strong>Remember:</strong> The card-holder answers all questions. No need to type‚Äîjust tap and keep the energy high.</p>
          </div>
        </div>
      </div>
      </section>

      <section id="scoreboard" class="panel">
        <h2>Scoreboard</h2>
        <table>
          <thead>
            <tr><th>Player</th><th>Points</th><th>Easy</th><th>Medium</th><th>Hard</th></tr>
          </thead>
          <tbody id="score-rows"></tbody>
        </table>
      </section>
    </div>
  </div>

  <script src="data/countries.js"></script>
  <script src="app.js"></script>
</body>
</html>
